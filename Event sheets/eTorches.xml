<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>eTorches</name>
    <events>
        <event-block sid="373035939538031">
            <conditions>
                <condition id="-2" name="On start of layout" sid="809720603553199" type="System" />
            </conditions>
            <actions>
                <action id="-3" name="Set position" sid="387436926462636" type="spr_fire">
                    <param id="0" name="X">spr_torch.X</param>
                    <param id="1" name="Y">spr_torch.Y - 14</param>
                </action>
                <action id="-15" name="Set visible" sid="931521582383589" type="spr_fire">
                    <param id="0" name="Visibility">0</param>
                </action>
                <action id="-3" name="Set position" sid="683712763742627" type="spr_torch_light">
                    <param id="0" name="X">spr_torch.X</param>
                    <param id="1" name="Y">spr_torch.Y - 23</param>
                </action>
                <action id="-15" name="Set visible" sid="156356898952608" type="spr_torch_light">
                    <param id="0" name="Visibility">0</param>
                </action>
                <action id="-26" name="Move to layer" sid="373045411630887" type="spr_torch_light">
                    <param id="0" name="Layer">&quot;black&quot;</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="707268497198878">
                    <conditions>
                        <condition id="-11" name="For Each" sid="545369411996697" type="System">
                            <param id="0" name="Object">spr_torch</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="124941715296278">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="826709726126840" type="spr_torch">
                                    <param id="0" name="Instance variable">type</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;normal&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="403613811393205">
                                    <conditions>
                                        <condition id="-8" name="Is boolean instance variable set" sid="674429222694183" type="spr_torch">
                                            <param id="0" name="Instance variable">is_lit</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" sid="710681928237465" type="spr_torch_light">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                        <action id="-15" name="Set visible" sid="137813391040945" type="spr_fire">
                                            <param id="0" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="685647536572000">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="798037588466128" type="spr_torch">
                                    <param id="0" name="Instance variable">type</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;long_distance&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="498162747849453" type="spr_torch">
                                    <param id="0" name="Animation">&quot;long_distance&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                                <action id="9" name="Set scale" sid="774024152904044" type="spr_torch">
                                    <param id="0" name="Scale">1.5</param>
                                </action>
                                <action id="9" name="Set scale" sid="530042048266643" type="spr_fire">
                                    <param id="0" name="Scale">1.5</param>
                                </action>
                                <action id="9" name="Set scale" sid="214161556857232" type="spr_torch_light">
                                    <param id="0" name="Scale">1.5</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="965144510836147">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="546158243242049" type="spr_torch">
                                    <param id="0" name="Instance variable">type</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;timed&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="271576559336416" type="spr_torch">
                                    <param id="0" name="Animation">&quot;timed&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                                <action id="-16" name="Set opacity" sid="439279953824657" type="spr_torch_light">
                                    <param id="0" name="Opacity">50</param>
                                </action>
                                <action id="9" name="Set scale" sid="397617467240813" type="spr_torch_light">
                                    <param id="0" name="Scale">0.5</param>
                                </action>
                                <action id="9" name="Set scale" sid="388780592332420" type="spr_fire">
                                    <param id="0" name="Scale">0.5</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Called from ePlayer.</comment>
        <event-block sid="812889329473886">
            <conditions>
                <condition id="0" name="On function" sid="285486436286647" type="Function">
                    <param id="0" name="Name">&quot;eTorches.Light_Torch&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <comment>0 - UID of the torch</comment>
                <event-block sid="697032662613953">
                    <conditions>
                        <condition id="-14" name="Pick by unique ID" sid="764410015337826" type="spr_torch">
                            <param id="0" name="Unique ID">Function.Param(0)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <comment>Why check if it&apos;s lit inside the function? To make sure the long_distance self-call doesn&apos;t get stuck in an infinite loop.</comment>
                        <event-block sid="696203897464312">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="557148427583896" type="spr_torch">
                                    <param id="0" name="Instance variable">is_lit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="807789878350251" type="spr_torch_light">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-15" name="Set visible" sid="946697962273851" type="spr_fire">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="853604448295271">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="768995961947821" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;normal&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="122722391248148" type="spr_torch">
                                            <param id="0" name="Instance variable">is_lit</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="496910813936497" type="Function">
                                            <param id="0" name="Name">&quot;eEvents/Respawn.Add_Event&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;torch_&quot; &amp; spr_torch.UID</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="493738788304959">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="596736321893468" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;long_distance&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="654632094863761" type="spr_torch">
                                            <param id="0" name="Instance variable">is_lit</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="238832610539687" type="Function">
                                            <param id="0" name="Name">&quot;eEvents/Respawn.Add_Event&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;torch_&quot; &amp; spr_torch.UID</param>
                                        </action>
                                        <action id="0" name="Call function" sid="827225109383560" type="Function">
                                            <param id="0" name="Name">&quot;eTorches.Light_Torch&quot;</param>
                                            <param id="1" name="Parameter {n}">spr_torch.long_distance_uid</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="521490670602086">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="164372040520925" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;timed&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="207331042599624">
                                            <conditions>
                                                <condition id="-14" name="Pick by unique ID" sid="183253757603541" type="obj_timed_torch_handler">
                                                    <param id="0" name="Unique ID">spr_torch.timed_manager_uid</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="153402071889804">
                                                    <conditions>
                                                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="918986008772578" type="obj_timed_torch_handler">
                                                            <param id="0" name="Instance variable">has_started_timer</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-13" name="Set boolean" sid="204659014891861" type="obj_timed_torch_handler">
                                                            <param id="0" name="Instance variable">has_started_timer</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action behavior="Timer" id="0" name="Start timer" sid="427751542153819" type="obj_timed_torch_handler">
                                                            <param id="0" name="Duration">Self.time_to_light</param>
                                                            <param id="1" name="Type">0</param>
                                                            <param id="2" name="Tag">&quot;light&quot;</param>
                                                        </action>
                                                        <action id="0" name="Call function" sid="290164822220379" type="Function">
                                                            <param id="0" name="Name">&quot;eTorches/TimedTorches.start_flashing&quot;</param>
                                                            <param id="1" name="Parameter {n}">obj_timed_torch_handler.UID</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="138229804620212">
            <conditions>
                <condition id="0" name="On function" sid="451212638054809" type="Function">
                    <param id="0" name="Name">&quot;eTorches.Boomerang_Touch_Torch&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <comment>0 - UID of the torch</comment>
                <event-block sid="872547359094433">
                    <conditions>
                        <condition id="-14" name="Pick by unique ID" sid="611391753434837" type="spr_torch">
                            <param id="0" name="Unique ID">Function.Param(0)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="723886251300136">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="543482032086931" type="spr_torch">
                                    <param id="0" name="Instance variable">half_lit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="980626747371760" type="spr_torch">
                                    <param id="0" name="Instance variable">half_lit</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-15" name="Set visible" sid="851781682875275" type="spr_torch_light">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-15" name="Set visible" sid="733774393041911" type="spr_fire">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="623466556692410">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="337197431507094" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;normal&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-16" name="Set opacity" sid="511990340305996" type="spr_torch_light">
                                            <param id="0" name="Opacity">50</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="723282630386991" type="spr_torch_light">
                                            <param id="0" name="Scale">0.5</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="800975353430560" type="spr_fire">
                                            <param id="0" name="Scale">0.5</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="892988685202690">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="499180754593171" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;long_distance&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-16" name="Set opacity" sid="217528437324307" type="spr_torch_light">
                                            <param id="0" name="Opacity">50</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="795522562664126" type="spr_torch_light">
                                            <param id="0" name="Scale">1</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="805628503766593" type="spr_fire">
                                            <param id="0" name="Scale">1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="142283931702999" type="Function">
                                            <param id="0" name="Name">&quot;eTorches.Boomerang_Touch_Torch&quot;</param>
                                            <param id="1" name="Parameter {n}">spr_torch.long_distance_uid</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="214516055353756">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="930716908741100" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;timed&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="336835969513123">
                                            <conditions>
                                                <condition id="-14" name="Pick by unique ID" sid="742901052428637" type="obj_timed_torch_handler">
                                                    <param id="0" name="Unique ID">spr_torch.timed_manager_uid</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="953415257538543">
                                                    <conditions>
                                                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="290236447159923" type="obj_timed_torch_handler">
                                                            <param id="0" name="Instance variable">has_started_timer</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-13" name="Set boolean" sid="889814628768151" type="obj_timed_torch_handler">
                                                            <param id="0" name="Instance variable">has_started_timer</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action behavior="Timer" id="0" name="Start timer" sid="568217948054202" type="obj_timed_torch_handler">
                                                            <param id="0" name="Duration">Self.time_to_light</param>
                                                            <param id="1" name="Type">0</param>
                                                            <param id="2" name="Tag">&quot;light&quot;</param>
                                                        </action>
                                                        <action id="0" name="Call function" sid="422073816232206" type="Function">
                                                            <param id="0" name="Name">&quot;eTorches/TimedTorches.start_flashing&quot;</param>
                                                            <param id="1" name="Parameter {n}">obj_timed_torch_handler.UID</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="651000970107292">
            <conditions>
                <condition id="0" name="On function" sid="268127217199170" type="Function">
                    <param id="0" name="Name">&quot;eTorches.Light_Half_Lit_Torches&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="499715999018292">
                    <conditions>
                        <condition id="-11" name="For Each" sid="885872544115162" type="System">
                            <param id="0" name="Object">spr_torch</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="826954173904789">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="697751182183380" type="spr_torch">
                                    <param id="0" name="Instance variable">half_lit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="259921951422867" type="spr_torch">
                                    <param id="0" name="Instance variable">half_lit</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="772667437969358" type="spr_torch">
                                    <param id="0" name="Instance variable">is_lit</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-16" name="Set opacity" sid="197762396916313" type="spr_torch_light">
                                    <param id="0" name="Opacity">100</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="448141568758601">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="781801753248795" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;normal&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="9" name="Set scale" sid="326692258766731" type="spr_torch_light">
                                            <param id="0" name="Scale">1</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="138198415984227" type="spr_fire">
                                            <param id="0" name="Scale">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="937866054220664">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="133894770688921" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;long_distance&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="9" name="Set scale" sid="985476831699626" type="spr_torch_light">
                                            <param id="0" name="Scale">1.5</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="994712034250326" type="spr_fire">
                                            <param id="0" name="Scale">1.5</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>No aditional condition is needed for timed torches since it&apos;s handled in /TimedTorches.</comment>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="195704737485963">
            <conditions>
                <condition id="0" name="On function" sid="670161819190148" type="Function">
                    <param id="0" name="Name">&quot;eTorches.Unlight_Half_Lit_Torches&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="972845710062988">
                    <conditions>
                        <condition id="-11" name="For Each" sid="931925791155810" type="System">
                            <param id="0" name="Object">spr_torch</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="445153593486515">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="908253241010298" type="spr_torch">
                                    <param id="0" name="Instance variable">half_lit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="631963113749184" type="spr_torch">
                                    <param id="0" name="Instance variable">half_lit</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="808188978677859" type="spr_torch_light">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="269114499434656" type="spr_fire">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="472564381720646">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="467804992778954" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;normal&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="9" name="Set scale" sid="348027618123645" type="spr_torch_light">
                                            <param id="0" name="Scale">1</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="283557828239606" type="spr_fire">
                                            <param id="0" name="Scale">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="152173482245901">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="375951996390968" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;long_distance&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="9" name="Set scale" sid="562301435639608" type="spr_torch_light">
                                            <param id="0" name="Scale">1.5</param>
                                        </action>
                                        <action id="9" name="Set scale" sid="342893210609148" type="spr_fire">
                                            <param id="0" name="Scale">1.5</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>If one timed torch failed, it means the whole failed and needs to be restarted.</comment>
                                <event-block sid="126667854311413">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="727326597706480" type="spr_torch">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;timed&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="733824164086791" type="Function">
                                            <param id="0" name="Name">&quot;eTorches/TimedTorches.restart_timed_torches&quot;</param>
                                            <param id="1" name="Parameter {n}">spr_torch.timed_manager_uid</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-group description="Handles checking and restarting timed torches (but not lighting them)" sid="697712526199578" title="eTorches/TimedTorches">
            <sub-events>
                <event-block sid="149755335622100">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="511063627446522" type="System" />
                    </conditions>
                    <actions>
                        <action id="-15" name="Set visible" sid="915483137497757" type="obj_timed_torch_handler">
                            <param id="0" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="834355077693841">
                    <conditions>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="276578279661149" type="obj_timed_torch_handler">
                            <param id="0" name="Instance variable">completed</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="643459492567759">
                            <conditions>
                                <condition id="-11" name="For Each" sid="652929645891515" type="System">
                                    <param id="0" name="Object">obj_timed_torch_handler</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable comment="True until proven false." constant="0" name="are_all_lit" sid="845333291366478" static="0" type="text">true</variable>
                                <event-block sid="949815230042373">
                                    <conditions>
                                        <condition id="-10" name="For" sid="214949095763514" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">0</param>
                                            <param id="2" name="End index">tokencount(obj_timed_torch_handler.torch_uids, &quot;|&quot;) - 1</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="105534712476728">
                                            <conditions>
                                                <condition id="-14" name="Pick by unique ID" sid="253783079539581" type="spr_torch">
                                                    <param id="0" name="Unique ID">int(tokenat(obj_timed_torch_handler.torch_uids, loopindex, &quot;|&quot;))</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="724570984892089">
                                                    <conditions>
                                                        <condition id="-9" inverted="1" name="Is visible" sid="706816004792665" type="spr_fire" />
                                                        <condition id="-9" inverted="1" name="Is visible" sid="167952130883260" type="spr_torch_light" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="-9" name="Set value" sid="686090056758419" type="System">
                                                            <param id="0" name="Variable">are_all_lit</param>
                                                            <param id="1" name="Value">&quot;false&quot;</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="202432331843648">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="656461172323026" type="System">
                                            <param id="0" name="Variable">are_all_lit</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;true&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="571248279232901" type="obj_timed_torch_handler">
                                            <param id="0" name="Instance variable">completed</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="681421281369604">
                                            <conditions>
                                                <condition id="-10" name="For" sid="969785390665225" type="System">
                                                    <param id="0" name="Name">&quot;&quot;</param>
                                                    <param id="1" name="Start index">0</param>
                                                    <param id="2" name="End index">tokencount(obj_timed_torch_handler.torch_uids, &quot;|&quot;) - 1</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="725067485747713">
                                                    <conditions>
                                                        <condition id="-14" name="Pick by unique ID" sid="804043933960143" type="spr_torch">
                                                            <param id="0" name="Unique ID">int(tokenat(obj_timed_torch_handler.torch_uids, loopindex, &quot;|&quot;))</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-16" name="Set opacity" sid="557733096811701" type="spr_torch_light">
                                                            <param id="0" name="Opacity">100</param>
                                                        </action>
                                                        <action id="9" name="Set scale" sid="561430273133291" type="spr_torch_light">
                                                            <param id="0" name="Scale">1</param>
                                                        </action>
                                                        <action id="9" name="Set scale" sid="500121464394464" type="spr_fire">
                                                            <param id="0" name="Scale">1</param>
                                                        </action>
                                                        <action id="-13" name="Set boolean" sid="816173539815450" type="spr_torch">
                                                            <param id="0" name="Instance variable">is_lit</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action behavior="Flash" id="1" name="Stop flashing" sid="454692011955238" type="spr_torch" />
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="733450070383071">
                                    <conditions>
                                        <condition behavior="Timer" id="0" name="On timer" sid="253597733371972" type="obj_timed_torch_handler">
                                            <param id="0" name="Tag">&quot;light&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-13" name="Set boolean" sid="578695124152895" type="obj_timed_torch_handler">
                                            <param id="0" name="Instance variable">has_started_timer</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="259281883354634">
                                            <conditions>
                                                <condition id="-10" name="For" sid="928650485246901" type="System">
                                                    <param id="0" name="Name">&quot;&quot;</param>
                                                    <param id="1" name="Start index">0</param>
                                                    <param id="2" name="End index">tokencount(obj_timed_torch_handler.torch_uids, &quot;|&quot;) - 1</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="964019380022875">
                                                    <conditions>
                                                        <condition id="-14" name="Pick by unique ID" sid="618472336016486" type="spr_torch">
                                                            <param id="0" name="Unique ID">int(tokenat(obj_timed_torch_handler.torch_uids, loopindex, &quot;|&quot;))</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-15" name="Set visible" sid="865301704307241" type="spr_torch_light">
                                                            <param id="0" name="Visibility">0</param>
                                                        </action>
                                                        <action id="-15" name="Set visible" sid="811048519687338" type="spr_fire">
                                                            <param id="0" name="Visibility">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="403563941691550">
                    <conditions>
                        <condition id="0" name="On function" sid="212350639028674" type="Function">
                            <param id="0" name="Name">&quot;eTorches/TimedTorches.restart_timed_torches&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="212851539155467">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="379216664197208" type="obj_timed_torch_handler">
                                    <param id="0" name="Unique ID">Function.Param(0)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="943019300200227" type="obj_timed_torch_handler">
                                    <param id="0" name="Instance variable">completed</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="308898453629869" type="obj_timed_torch_handler">
                                    <param id="0" name="Instance variable">has_started_timer</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="385764689666886">
                                    <conditions>
                                        <condition id="-10" name="For" sid="280278128200820" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">0</param>
                                            <param id="2" name="End index">tokencount(obj_timed_torch_handler.torch_uids, &quot;|&quot;) - 1</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="113986369067632">
                                            <conditions>
                                                <condition id="-14" name="Pick by unique ID" sid="655363395562659" type="spr_torch">
                                                    <param id="0" name="Unique ID">int(tokenat(obj_timed_torch_handler.torch_uids, loopindex, &quot;|&quot;))</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-16" name="Set opacity" sid="904330253432276" type="spr_torch_light">
                                                    <param id="0" name="Opacity">50</param>
                                                </action>
                                                <action id="9" name="Set scale" sid="586570334086628" type="spr_torch_light">
                                                    <param id="0" name="Scale">0.5</param>
                                                </action>
                                                <action id="-15" name="Set visible" sid="382692062333888" type="spr_torch_light">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="-15" name="Set visible" sid="211695308488554" type="spr_fire">
                                                    <param id="0" name="Visibility">0</param>
                                                </action>
                                                <action id="9" name="Set scale" sid="554201788316196" type="spr_fire">
                                                    <param id="0" name="Scale">0.5</param>
                                                </action>
                                                <action id="-13" name="Set boolean" sid="468143348770553" type="spr_torch">
                                                    <param id="0" name="Instance variable">is_lit</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="499990298618532">
                    <conditions>
                        <condition id="0" name="On function" sid="637606162364150" type="Function">
                            <param id="0" name="Name">&quot;eTorches/TimedTorches.start_flashing&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="206445683720842">
                            <conditions>
                                <condition id="-14" name="Pick by unique ID" sid="652812188545640" type="obj_timed_torch_handler">
                                    <param id="0" name="Unique ID">Function.Param(0)</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="512113655268466">
                                    <conditions>
                                        <condition id="-10" name="For" sid="145202226330953" type="System">
                                            <param id="0" name="Name">&quot;&quot;</param>
                                            <param id="1" name="Start index">0</param>
                                            <param id="2" name="End index">tokencount(obj_timed_torch_handler.torch_uids, &quot;|&quot;) - 1</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="726913976664998">
                                            <conditions>
                                                <condition id="-14" name="Pick by unique ID" sid="642911392664614" type="spr_torch">
                                                    <param id="0" name="Unique ID">int(tokenat(obj_timed_torch_handler.torch_uids, loopindex, &quot;|&quot;))</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Flash" id="0" name="Flash" sid="408937896016015" type="spr_torch">
                                                    <param id="0" name="&apos;On&apos; time">0.3</param>
                                                    <param id="1" name="&apos;Off&apos; time">0.1</param>
                                                    <param id="2" name="Duration">obj_timed_torch_handler.time_to_light - 1</param>
                                                </action>
                                                <action behavior="Timer" id="0" name="Start timer" sid="104747661445900" type="spr_torch">
                                                    <param id="0" name="Duration">obj_timed_torch_handler.time_to_light - 1</param>
                                                    <param id="1" name="Type">0</param>
                                                    <param id="2" name="Tag">&quot;quick_flash&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="101872970877051">
                    <conditions>
                        <condition behavior="Timer" id="0" name="On timer" sid="888310482962291" type="spr_torch">
                            <param id="0" name="Tag">&quot;quick_flash&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="187913857908416">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="488478498200427" type="spr_torch">
                                    <param id="0" name="Instance variable">is_lit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Flash" id="0" name="Flash" sid="532566834422421" type="spr_torch">
                                    <param id="0" name="&apos;On&apos; time">0.08</param>
                                    <param id="1" name="&apos;Off&apos; time">0.08</param>
                                    <param id="2" name="Duration">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
